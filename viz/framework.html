<!doctype html>
<html>
<link rel="stylesheet" type="text/css" href="framework.css" />
<body>
  <section id="section01" class="demo">
    <h1>Wiki Insights</h1>
    <a href="#section02"><span></span>Scroll</a>


    <div>
  		<form id="add" method="post">
  			<fieldset>
  				<!-- <legend><span class="number"></span> New Country </legend> -->
  				<label>Keyword:</label>
  				<select name="continent" required>
  					<option disabled selected value> -- Select an Keyword -- </option>
  					<option value="Asia">Eigenvalues_and_eigenvectors</option>
  					<option value="North America">Meme</option>
  					<option value="South America">Normal_distribution</option>
  					<option value="Europe">Europe</option>
  					<option value="Africa">Africa</option>

  				</select>
  			</fieldset>
  			<!-- <input type="submit" name="add" value="Visualize" /> -->
        <input type="button" name="submit_id" id="btn_id" value="Submit by Id" onclick="submit_by_id()"/>
  		</form>
  	</div>


  </section>
  <section id="section02" class="demo">
    <!-- <h1>Scroll Down Button #2</h1> -->
    <a href="#section03"><span></span>Scroll</a>
  </section>
  <section id="section03" class="demo">
    <h1>Scroll Down Button #3</h1>
    <a href="#section04"><span></span>Scroll</a>
  </section>
  <section id="section04" class="demo">
    <h1>Scroll Down Button #4</h1>
    <a href="#thanks"><span></span>Scroll</a>
  </section>
  <section id="thanks">
    <div>
      <h2>Thanks!</h2>
      <!-- <p><a href="https://www.nxworld.net/tips/css-scroll-down-button.html" target="_parent">&lt; Back To Article</a></p> -->
    </div>
  </section>
</body>
<script>

$(function() {
  $('a[href*=#]').on('click', function(e) {
    e.preventDefault();
    $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top}, 500, 'linear');
  });
});

</script>




<!-- load the d3.js library -->
<script src="//d3js.org/d3.v4.min.js"></script>
<script>
var root;
// Submit form with id function.
function submit_by_id() {

  d3.json("Eigenvalues_and_eigenvectors_web.json", function(error,data){
    console.log(error);
    root = data;
    if(root != undefined){
      console.log(root);
      var diameter = 600;
      var color = d3.scaleOrdinal(d3.schemeCategory20);
      // d3.selectAll("svg").exit().remove();
      d3.selectAll("svg").remove();
      var svg = d3.select("#section02")
          .append("svg")
          .attr("width", diameter)
          .attr("height", diameter)
          .attr("class", "bubble");
      update(root[0],svg);
      var svg1 = d3.select("#section03")
          .append("svg")
          .attr("width", diameter)
          .attr("height", diameter)
          .attr("class", "bubble");
      update(root[1],svg1);
      var svg2 = d3.select("#section04")
          .append("svg")
          .attr("width", diameter)
          .attr("height", diameter)
          .attr("class", "bubble");
      update(root[2],svg2);
    }
    //console.log(root);
  });
}

  function update(source,s) {
    var diameter = 600;
    var color = d3.scaleOrdinal(d3.schemeCategory20);
    var bubble = d3.pack(source)
        .size([diameter, diameter])
        .padding(1.5);

    var nodes = d3.hierarchy(source)
        .sum(function(d) { return d.Count; });

    console.log(nodes);
    var div = d3.select("#right").append("div")
          .attr("class", "tooltip")
          .style("opacity", 0);

    var node = s.selectAll(".node")
        .data(bubble(nodes).descendants())
        .enter()
        .filter(function(d){
            return  !d.children
        })
        .append("g")
        .attr("class", "node")
        .attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")";
        })
        .on('click',function(d){
              div.transition().duration(200)
                //.style('left',d3.event.pageX - 20 + "px")
                //.style('top',d3.event.pageY + "px")
                .style('opacity','0.9')
                .style('display','inline-block')
              div.html(d.data.Desc);
            })
      /*.on("mouseout", function(d){
        div.transition().duration(200)
          .style('opacity','0');
        });*/

    node.append("title")
        .text(function(d) {
            return d.Name + ": " + d.Rank;
        });

    node.append("circle")
        .attr("r", function(d) {
            return d.r;
        })
        .style("fill", function(d,i) {
            return color(i);
        });

    node.append("text")
        .attr("dy", ".2em")
        .style("text-anchor", "middle")
        .text(function(d) {
            return d.data.Name.substring(0, d.r / 3);
        })
        .attr("font-family", "sans-serif")
        .attr("font-size", function(d){
            return d.r/5;
        })
        .attr("fill", "white");

    node.append("text")
        .attr("dy", "1.3em")
        .style("text-anchor", "middle")
        .text(function(d) {
            return d.data.Count;
        })
        .attr("font-family",  "Gill Sans", "Gill Sans MT")
        .attr("font-size", function(d){
            return d.r/5;
        })
        .attr("fill", "white");

    d3.select(self.frameElement)
        .style("height", diameter + "px");
  }
</script>
</html>
